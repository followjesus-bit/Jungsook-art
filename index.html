<script>
  const photos = [];
  for (let i = 1; i <= 58; i++) {
    const num = String(i).padStart(3, '0');
    photos.push({ src: `images/${num}.png`, caption: `Caption for image ${num}` });
  }

  let currentIndex = 0;

  function updateViewer() {
    const photo = photos[currentIndex];
    const img = document.getElementById("photo");
    img.src = photo.src;
    document.getElementById("caption").innerText = photo.caption;
    document.getElementById("index").innerText = `${currentIndex + 1} / ${photos.length}`;
  }

  // Wrap-around navigation
  function prevPhoto() {
    currentIndex = (currentIndex - 1 + photos.length) % photos.length;
    updateViewer();
  }

  function nextPhoto() {
    currentIndex = (currentIndex + 1) % photos.length;
    updateViewer();
  }

  document.getElementById("photo").onerror = function() {
    console.warn("Image failed to load:", photos[currentIndex].src);
    nextPhoto();
  };

  document.getElementById("photo").addEventListener('click', (event) => {
    const midpoint = event.target.clientWidth / 2;
    if (event.offsetX < midpoint) {
      prevPhoto();
    } else {
      nextPhoto();
    }
  });

  updateViewer();
</script>
